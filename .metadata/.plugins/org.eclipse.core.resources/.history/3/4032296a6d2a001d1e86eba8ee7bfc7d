/**
 * 配合ajax请求展示分页数据
 */
// 生成分页
function gengratePage() {
	var pageInfo = getPageIfoRemote();//获取数据
	fillTableBody(pageInfo);//填充表格

}

// 获取后台数据
function getPageIfoRemote() {
	var ajaxResult = $.ajax({
		"url": "role/get/page/info.json",
		"type": "post",
		"data": {
			//这样的数据格式还是form表单形式
			"pageNum": window.pageNum,
			"pageSize": window.pageSize,
			"keyword": window.keyword
		},
		"async": false,
		"dataType": "json"
	})
	console.log(ajaxResult)
	var statusCode = ajaxResult.status

	if (statusCode != 200) {
		layer.msg("服务器端程序调用失败，响应状态码=" + statusCode + "，说明信息：" + ajaxResult.statusText)
		return null
	}

	var resultEntity = ajaxResult.responseJSON

	var result = resultEntity.result//判断后台封装的ResultEntity实体类对象的信息

	if (result == "FAILD") {
		layer.msg(resultEntity.message)//message是ResultEntity封装的数据
		return null
	}

	var pageInfo = resultEntity.data

	return pageInfo
}

// 用后台数据填充表格
function fillTableBody(pageInfo) {
	
	$("#rolePageBody").empty()
	
	if (pageInfo == null || pageInfo == undefined || pageInfo.list == null || pageInfo.list.length == 0) {
		$("#rolePageBody").append("<tr><td clospan = '4'>抱歉，当前无相应数据！</td></tr>")
		return
	}

	var tr = ""
	for (var i = 0; i < pageInfo.list.length; i++) {
		var role = pageInfo.list[i]
		var roleId = role.id
		var roleName = role.name
		var numberId = i + 1

		tr += `
			<tr>
				<td>${numberId}</td>
				<td><input type="checkbox"></td>
				<td>${roleName}</td>
				<td>
					<button type="button" class="btn btn-success btn-xs">
						<i class=" glyphicon glyphicon-check"></i>
					</button>
					<button type="button" class="btn btn-primary btn-xs">
						<i class=" glyphicon glyphicon-pencil"></i>
					</button>
					<button type="button" class="btn btn-danger btn-xs">
						<i class=" glyphicon glyphicon-remove"></i>
					</button>
				</td>
			</tr>
		`
	}
	$("#rolePageBody").append(tr)


}
// 用后台数据填充分页条
function generateNavigator(pageInfo) {

}
// 执行翻页
function paginationCallBack(pageInfo, jQuery) {

}